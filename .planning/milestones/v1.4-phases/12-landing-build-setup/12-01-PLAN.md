---
phase: 12-landing-build-setup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - landing.html
  - vite.config.landing.ts
  - src/landing/main.ts
  - src/landing/style.css
  - public-landing/logo.svg
  - public-landing/logo-circle.svg
  - package.json
autonomous: true
requirements: [LAND-05]

must_haves:
  truths:
    - "landing.html exists as a third Vite entry point alongside index.html and live.html"
    - "npm run build:landing produces a working static build in dist-landing/"
    - "npm run dev:landing starts a dev server serving the landing page"
    - "npm run dev (coach app) continues to work unchanged"
    - "npm run dev:live (tablet app) continues to work unchanged"
  artifacts:
    - path: "landing.html"
      provides: "HTML entry point for landing page"
      contains: "script type=\"module\" src=\"/src/landing/main.ts\""
    - path: "vite.config.landing.ts"
      provides: "Vite configuration for landing build"
      contains: "landing.html"
    - path: "src/landing/main.ts"
      provides: "Vanilla JS entry point (no React)"
      min_lines: 3
    - path: "src/landing/style.css"
      provides: "Tailwind CSS entry for landing page"
      contains: "@import \"tailwindcss\""
    - path: "public-landing/logo.svg"
      provides: "Logo asset for landing page"
    - path: "public-landing/logo-circle.svg"
      provides: "Favicon asset for landing page"
    - path: "package.json"
      provides: "npm scripts for landing dev/build"
      contains: "dev:landing"
  key_links:
    - from: "landing.html"
      to: "src/landing/main.ts"
      via: "script module import"
      pattern: "src/landing/main.ts"
    - from: "src/landing/main.ts"
      to: "src/landing/style.css"
      via: "CSS import"
      pattern: "import.*style.css"
    - from: "vite.config.landing.ts"
      to: "landing.html"
      via: "rollup input"
      pattern: "landing.html"
    - from: "package.json"
      to: "vite.config.landing.ts"
      via: "npm script --config flag"
      pattern: "vite.config.landing.ts"
---

<objective>
Create the third Vite entry point for the Helix landing page, following the established multi-entry pattern used by the live tablet app (live.html + vite.config.live.ts).

Purpose: Build infrastructure for the landing page — a plain HTML + Tailwind CSS page (no React, no PWA) that builds independently alongside the existing coach and live apps.

Output: landing.html, vite.config.landing.ts, src/landing/ directory, public-landing/ assets, and npm scripts (dev:landing, build:landing).
</objective>

<execution_context>
@/home/toto/.claude/get-shit-done/workflows/execute-plan.md
@/home/toto/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Reference files for the existing multi-entry pattern:
@vite.config.live.ts
@live.html
@src/main-live.tsx
@package.json
@src/index.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create landing page entry point, Vite config, and assets</name>
  <files>
    landing.html
    vite.config.landing.ts
    src/landing/main.ts
    src/landing/style.css
    public-landing/logo.svg
    public-landing/logo-circle.svg
  </files>
  <action>
Create the landing page build infrastructure following the live app pattern (live.html + vite.config.live.ts) but simplified for a static page:

**landing.html** (root of project, alongside index.html and live.html):
- Standard HTML5 document with `lang="en"` (landing is public-facing, default English)
- Meta charset UTF-8, viewport for responsive design (width=device-width, initial-scale=1.0) — NO maximum-scale or user-scalable=no (this is not a mobile app)
- Meta description: "Helix - AI-powered assistant for fitness coaches"
- Title: "Helix - AI Fitness Coach" (per user decision)
- Favicon: `/logo-circle.svg` (same pattern as other entry points)
- No apple-touch-icon (not a PWA)
- No theme-color meta (not a PWA)
- Body with a single `<div id="app"></div>` (use "app" not "root" to distinguish from React apps)
- Script tag: `<script type="module" src="/src/landing/main.ts"></script>`

**vite.config.landing.ts**:
- Import `path` from 'path', `defineConfig` and `Plugin` from 'vite', `tailwindcss` from '@tailwindcss/vite'
- NO react plugin (plain HTML + Tailwind, no React per user decision)
- NO VitePWA plugin (no PWA manifest per user decision)
- Include `tailwindcss()` plugin for Tailwind CSS support
- Create a `landingHtmlPlugin()` middleware plugin (same pattern as `liveHtmlPlugin` in vite.config.live.ts) that rewrites '/' and '/index.html' to '/landing.html' in dev mode
- resolve.alias: `'@': path.resolve(__dirname, './src')` (consistent with other configs)
- publicDir: `'public-landing'`
- build.outDir: `'dist-landing'`
- build.rollupOptions.input: `{ main: path.resolve(__dirname, 'landing.html') }`

**src/landing/style.css**:
- `@import "tailwindcss";` as first line (same as src/index.css)
- Add Helix brand color CSS custom properties under `:root` for use in Phase 13:
  ```css
  :root {
    --helix-amber: #f59e0b;
    --helix-coral: #f97316;
    --helix-violet: #8b5cf6;
  }
  ```
- Basic body styling: `font-family: system-ui, -apple-system, sans-serif;`
- Background white, text dark (simple base for static page)

**src/landing/main.ts**:
- Import `'./style.css'`
- Add a simple console.log identifying the landing page: `console.log('Helix Landing Page loaded')`
- Create a minimal branded stub: query `#app` element and set its innerHTML to a centered container with:
  - The Helix logo as an `<img>` tag (src="/logo.svg", alt="Helix")
  - An `<h1>` with text "Helix" styled with Tailwind classes (text-4xl font-bold)
  - A `<p>` with text "AI-powered assistant for fitness coaches" styled with text-gray-600
  - Use amber/coral/violet from Helix palette in a subtle gradient or accent
  - This is a placeholder — real content comes in Phase 13
- Use vanilla JS only, no frameworks (per user decision)

**public-landing/** directory:
- Copy `public/logo.svg` to `public-landing/logo.svg`
- Copy `public/logo-circle.svg` to `public-landing/logo-circle.svg`
- These are the only assets needed for the stub page (no PWA icons needed)
  </action>
  <verify>
Verify files exist:
```bash
ls -la landing.html vite.config.landing.ts src/landing/main.ts src/landing/style.css public-landing/logo.svg public-landing/logo-circle.svg
```
Verify landing.html references the correct script:
```bash
grep "src/landing/main.ts" landing.html
```
Verify vite config references landing.html:
```bash
grep "landing.html" vite.config.landing.ts
```
Verify no React imports in landing files:
```bash
grep -r "react" src/landing/ || echo "No React imports - correct"
```
  </verify>
  <done>
All 6 files exist. landing.html loads src/landing/main.ts. vite.config.landing.ts builds from landing.html to dist-landing/ using public-landing/ assets. No React dependencies in any landing file.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add npm scripts and verify all three entry points work</name>
  <files>
    package.json
  </files>
  <action>
Add landing page npm scripts to package.json following the existing pattern:

Add these scripts (in the scripts section, grouped after the existing live scripts):
- `"dev:landing": "vite --config vite.config.landing.ts --port 5175 --force"` — port 5175 (5173=coach, 5174=live, 5175=landing)
- `"dev:landing:clean": "rm -rf node_modules/.vite && vite --config vite.config.landing.ts --port 5175 --force"` — cache clearing variant (per user decision: include dev:clean equivalent)
- `"build:landing": "vite build --config vite.config.landing.ts"` — NO `tsc -b` prefix (no TypeScript to check — plain JS/TS with no React/JSX)
- `"preview:landing": "vite preview --config vite.config.landing.ts --port 5175"` — preview built landing

After adding scripts, verify all three apps still work:

1. Run `npm run build` and confirm it succeeds (coach app unaffected)
2. Run `npm run build:live` and confirm it succeeds (live app unaffected)
3. Run `npm run build:landing` and confirm it produces output in dist-landing/
4. Verify dist-landing/ contains the expected files (landing.html, assets/)
  </action>
  <verify>
```bash
# Verify scripts exist in package.json
grep "dev:landing" package.json
grep "build:landing" package.json
grep "preview:landing" package.json

# Build all three apps
npm run build 2>&1 | tail -5
npm run build:live 2>&1 | tail -5
npm run build:landing 2>&1 | tail -5

# Verify landing build output
ls dist-landing/
```
  </verify>
  <done>
package.json has dev:landing, dev:landing:clean, build:landing, preview:landing scripts. All three builds succeed independently: `npm run build` (dist/), `npm run build:live` (dist-live/), `npm run build:landing` (dist-landing/). Existing coach and live apps are not affected.
  </done>
</task>

</tasks>

<verification>
Phase-level verification:

1. **Three entry points coexist:**
   - `index.html` (coach app) — unchanged
   - `live.html` (tablet app) — unchanged
   - `landing.html` (landing page) — new

2. **Three independent builds:**
   - `npm run build` → `dist/`
   - `npm run build:live` → `dist-live/`
   - `npm run build:landing` → `dist-landing/`

3. **Three dev servers (different ports):**
   - `npm run dev` → localhost:5173
   - `npm run dev:live` → localhost:5174
   - `npm run dev:landing` → localhost:5175

4. **No cross-contamination:**
   - Landing has no React imports
   - Landing has no PWA configuration
   - Landing uses its own public-landing/ directory
   - Existing configs are completely untouched
</verification>

<success_criteria>
- landing.html exists as a third entry point
- npm run build:landing produces dist-landing/ with a working static page
- npm run dev:landing starts a dev server on port 5175
- npm run dev and npm run dev:live continue working unchanged
- All three builds succeed independently
- Landing page uses plain HTML + Tailwind CSS (no React, no PWA)
</success_criteria>

<output>
After completion, create `.planning/phases/12-landing-build-setup/12-01-SUMMARY.md`
</output>
